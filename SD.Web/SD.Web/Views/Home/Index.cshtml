@using SD.Web.Areas.UserRegular.Models

@{
	ViewData["Title"] = "Index";
}

<h2>Public sensors</h2>
<hr />

@(Html.Kendo().Grid<UserSensorViewModel>()
							.Name("grid")
							.Columns(columns =>
							{
								columns.Bound(c => c.Name).Width(140);
								columns.Bound(c => c.Description).Width(190);
								columns.Bound(c => c.Type).Width(190);
								columns.Bound(c => c.LastValueUser).Width(110);
								columns.Bound(p => p.Id).ClientTemplate(
											"<button type=\"submit\" class=\"btn btn-success\"><a href='" + "sensor?id=#= Id #'" +
											">Show Product Details</a></button>").Title("Details").Sortable(false).Filterable(false).Width(150);
							})
																			.HtmlAttributes(new { style = "height: 380px;" })
																			.Scrollable()
																			.Groupable()
																			.Sortable()
																			.Filterable()
																			.Pageable(pageable => pageable
																				.Refresh(true)
																				.PageSizes(true)
																				.ButtonCount(5))
																			.DataSource(dataSource => dataSource
																				.Ajax()
																				.Read(read => read.Action("Get_Sensors", "Home"))
																			)
)
<style>
        #gauge-container {
            background: transparent url("@Url.Content("~/shared/dataviz/gauge/gauge-container-partial.png")") no-repeat 50% 50%;
            width: 386px;
            height: 386px;
            text-align: center;
            margin: 0 auto 30px auto;
        }

        #gauge {
            width: 350px;
            height: 300px;
            margin: 0 auto;
            border-color: transparent;
        }

        #gauge-container .k-slider {
            margin-top: -11px;
            width: 140px;
        }
</style>

<div id="gauge-container">
	@(Html.Kendo().RadialGauge()
								.Name("gauge")
								.Pointer(pointer => pointer.Value(0))
								.Scale(scale => scale
									.MinorUnit(5)
									.StartAngle(-30)
									.EndAngle(210)
									.Max(180)
								)
	)
</div>
<script>
	$(document).ready(setInterval(function () {

		$.ajax({
			type: "POST",
			cache: false,
			url: 'Home/test/',
			success: function (data) {
				$("#gauge").data("kendoRadialGauge").value(data);
			}
		})

	}, 3000))
</script>


<div class="clearfix"></div>

@section Scripts {
	@await Html.PartialAsync("_ValidationScriptsPartial")

}